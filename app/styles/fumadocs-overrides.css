/* Fumadocs UI overrides scoped to docs/MDX surfaces */

@layer utilities {
  /* Numbered step badge in <Steps>/<Step> */
  .prose :where(.fd-step)::before {
    /* Colors from shadcn tokens */
    @apply bg-muted text-primary size-8 text-lg;
  }

  /* Remove quote marks around blockquoted text */
  .prose blockquote::before,
  .prose blockquote::after {
    content: none !important;
  }

  .prose blockquote p::before,
  .prose blockquote p::after {
    content: none !important;
  }
}

/* Center component previews in Tabs (outside @layer for higher specificity) */
[data-state][role="tabpanel"] > .not-prose {
  margin-inline: auto;
}

/* Make code blocks full-width in component preview shell */
[data-state][role="tabpanel"] > figure:only-child {
  margin: -1rem !important;
}

/* Constrain fumadocs code blocks to prevent overflow from long strings.
   The fumadocs Pre component uses w-max (width: max-content) which causes
   overflow with long unbreakable strings like URLs. We override to allow
   wrapping within the container bounds. */
figure.shiki {
  max-width: 100%;
}

figure.shiki pre {
  width: 100% !important;
  min-width: 0 !important;
  max-width: 100% !important;
}

figure.shiki pre code {
  white-space: pre-wrap;
  word-break: break-all;
  overflow-wrap: anywhere;
}

/* Full-bleed code panel with internal padding for view mode toggle */
.code-panel-fullbleed {
  & figure.shiki {
    display: flex;
    flex: 1;
    flex-direction: column;
    min-height: 0;
    margin: 0;
    border-radius: 0;
    border: none;
    overflow: hidden;
  }

  & figure.shiki pre {
    flex: 1;
    padding-top: 4rem; /* 48px - space for toggle button */
    margin: 0;
    border-radius: 0;
  }

  /* Override max-height on scroll container to fill available height */
  & .fd-scroll-container {
    max-height: none !important;
    height: 100%;
    padding-bottom: 6rem; /* Extra scroll room at bottom */
  }

  /* Hide fumadocs' built-in copy button - we use our own */
  & figure.shiki > div.absolute {
    display: none;
  }

  @media (min-width: 1024px) {
    & figure.shiki {
      border-radius: 0.5rem; /* matches rounded-lg */
    }
  }
}

@theme {
  /* Blue-gray palette (hue 240) to match shadcn theme */
  --color-fd-background: hsl(0 0% 100%);
  --color-fd-foreground: hsl(240 10% 3.9%);
  --color-fd-muted: hsl(240 4.8% 95.9%);
  --color-fd-muted-foreground: hsl(240 3.8% 46.1%);
  --color-fd-popover: hsl(0 0% 100%);
  --color-fd-popover-foreground: hsl(240 10% 3.9%);
  --color-fd-card: hsl(0 0% 100%);
  --color-fd-card-foreground: hsl(240 10% 3.9%);
  --color-fd-border: hsl(240 5.9% 90%);
  --color-fd-primary: hsl(240 5.9% 10%);
  --color-fd-primary-foreground: hsl(0 0% 98%);
  --color-fd-secondary: hsl(240 4.8% 95.9%);
  --color-fd-secondary-foreground: hsl(240 5.9% 10%);
  --color-fd-accent: hsl(240 4.8% 95.9%);
  --color-fd-accent-foreground: hsl(240 5.9% 10%);
  --color-fd-ring: hsl(240 5.9% 10%);
}

.dark {
  /* Blue-gray palette (hue 240) to match shadcn dark theme */
  --color-fd-background: hsl(240 10% 3.9%);
  --color-fd-foreground: hsl(0 0% 98%);
  --color-fd-muted: hsl(240 3.7% 15.9%);
  --color-fd-muted-foreground: hsl(240 5% 64.9%);
  --color-fd-popover: hsl(240 10% 3.9%);
  --color-fd-popover-foreground: hsl(0 0% 98%);
  --color-fd-card: hsl(240 10% 3.9%);
  --color-fd-card-foreground: hsl(0 0% 98%);
  --color-fd-border: hsl(240 3.7% 15.9%);
  --color-fd-primary: hsl(0 0% 98%);
  --color-fd-primary-foreground: hsl(240 5.9% 10%);
  --color-fd-secondary: hsl(240 3.7% 8%);
  --color-fd-secondary-foreground: hsl(0 0% 98%);
  --color-fd-accent: hsl(240 3.7% 15.9%);
  --color-fd-accent-foreground: hsl(0 0% 98%);
  --color-fd-ring: hsl(240 4.9% 83.9%);
}
