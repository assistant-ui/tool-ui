import { DocsHeader } from "../_components/docs-header";
import { StatsDisplay } from "@/components/tool-ui/stats-display";

<DocsHeader
  title="Stats Display"
  description="Display key metrics in a grid."
  mdxPath="app/docs/stats-display/content.mdx"
/>

<Tabs items={["Preview", "Code"]}>
  <Tab>
    <div className="not-prose mx-auto max-w-lg">
      <StatsDisplay
        id="stats-example"
        title="Q4 Performance"
        description="October through December 2024"
        stats={[
          {
            key: "revenue",
            label: "Revenue",
            value: 847300,
            format: { kind: "currency", currency: "USD", decimals: 0 },
            sparkline: { data: [72000, 68000, 74000, 81000, 78000, 85000, 89000, 91000, 86000, 94000, 97000, 102000], color: "var(--chart-1)" },
            diff: { value: 12.4, decimals: 1 },
          },
          {
            key: "active-users",
            label: "Active Users",
            value: 24890,
            format: { kind: "number", compact: true },
            sparkline: { data: [18200, 19100, 19800, 20400, 21200, 21900, 22600, 23100, 23800, 24200, 24500, 24890], color: "var(--chart-3)" },
            diff: { value: 8.2, decimals: 1 },
          },
          {
            key: "churn",
            label: "Churn Rate",
            value: 2.1,
            format: { kind: "percent", decimals: 1, basis: "unit" },
            sparkline: { data: [3.2, 3.0, 2.8, 2.9, 2.7, 2.5, 2.4, 2.3, 2.2, 2.1, 2.1, 2.1], color: "var(--chart-4)" },
            diff: { value: -0.8, decimals: 1, upIsPositive: false },
          },
          {
            key: "nps",
            label: "NPS Score",
            value: 72,
            format: { kind: "number" },
            sparkline: { data: [58, 61, 64, 62, 65, 68, 66, 69, 70, 71, 71, 72], color: "var(--chart-5)" },
            diff: { value: 5.0, decimals: 0 },
          },
        ]}
      />
    </div>
  </Tab>
  <Tab>
    ```tsx
    import { StatsDisplay } from "@/components/tool-ui/stats-display";

    export function Example() {
      return (
        <StatsDisplay
          id="stats-example"
          title="Q4 Performance"
          description="October through December 2024"
          stats={[
            {
              key: "revenue",
              label: "Revenue",
              value: 847300,
              format: { kind: "currency", currency: "USD", decimals: 0 },
              sparkline: { data: [72000, 68000, 74000, 81000, 78000, 85000, 89000, 91000, 86000, 94000, 97000, 102000], color: "var(--chart-1)" },
              diff: { value: 12.4, decimals: 1 },
            },
            {
              key: "active-users",
              label: "Active Users",
              value: 24890,
              format: { kind: "number", compact: true },
              sparkline: { data: [18200, 19100, 19800, 20400, 21200, 21900, 22600, 23100, 23800, 24200, 24500, 24890], color: "var(--chart-3)" },
              diff: { value: 8.2, decimals: 1 },
            },
            {
              key: "churn",
              label: "Churn Rate",
              value: 2.1,
              format: { kind: "percent", decimals: 1, basis: "unit" },
              sparkline: { data: [3.2, 3.0, 2.8, 2.9, 2.7, 2.5, 2.4, 2.3, 2.2, 2.1, 2.1, 2.1], color: "var(--chart-4)" },
              diff: { value: -0.8, decimals: 1, upIsPositive: false },
            },
            {
              key: "nps",
              label: "NPS Score",
              value: 72,
              format: { kind: "number" },
              sparkline: { data: [58, 61, 64, 62, 65, 68, 66, 69, 70, 71, 71, 72], color: "var(--chart-5)" },
              diff: { value: 5.0, decimals: 0 },
            },
          ]}
        />
      );
    }
    ```
  </Tab>
</Tabs>

## Key Features

<FeatureGrid>
  <Feature icon="Grid2x2" title="Auto-responsive grid">
    CSS grid with auto-fit adapts to container width
  </Feature>
  <Feature icon="LineChart" title="Inline sparklines">
    Pure SVG trend visualization without external dependencies
  </Feature>
  <Feature icon="BarChart3" title="Delta indicators">
    Semantic colors with upIsPositive for metrics where down is good
  </Feature>
  <Feature icon="DollarSign" title="Flexible formatting">
    Currency, percent, number, and text formats with locale support
  </Feature>
  <Feature icon="Target" title="Single-stat hero mode">
    Pass a single stat for a larger, centered presentation
  </Feature>
</FeatureGrid>

## Source and Install

Copy [`components/tool-ui/stats-display`](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/stats-display) and the [`shared`](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared) directory into your project. The `shared` folder contains utilities used by all Tool UI components. The `tool-ui` directory should sit alongside your shadcn `ui` directory.

### Prerequisites

This component requires the following [shadcn/ui](https://ui.shadcn.com) components:

```bash
pnpm dlx shadcn@latest add card
```

### Directory Structure

<Files>
  <Folder name="components" defaultOpen>
    <Folder name="ui">
      <File name="card.tsx" />
      <File name="..." />
    </Folder>
    <Folder name="tool-ui" defaultOpen>
      <Folder name="shared" defaultOpen>
        <File name="action-buttons.tsx" />
        <File name="schema.ts" />
        <File name="index.ts" />
        <File name="..." />
      </Folder>
      <Folder name="stats-display" defaultOpen>
        <File name="stats-display.tsx" />
        <File name="sparkline.tsx" />
        <File name="schema.ts" />
        <File name="index.tsx" />
        <File name="error-boundary.tsx" />
      </Folder>
    </Folder>
  </Folder>
</Files>

### Download

- [**Shared Dependencies (GitHub)**](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared) ([ZIP](https://download-directory.github.io/?url=https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared))
- [**Stats Display (GitHub)**](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/stats-display) ([ZIP](https://download-directory.github.io/?url=https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/stats-display))

## Usage

```tsx
"use client";

import { makeAssistantTool } from "@assistant-ui/react";
import {
  StatsDisplay,
  StatsDisplayErrorBoundary,
  parseSerializableStatsDisplay,
  SerializableStatsDisplaySchema,
  type SerializableStatsDisplay,
} from "@/components/tool-ui/stats-display";

export const StatsDisplayTool = makeAssistantTool<SerializableStatsDisplay>({
  toolName: "showStats",
  description: "Display key metrics in a grid",
  parameters: SerializableStatsDisplaySchema,
  render: ({ args, result, addResult, toolCallId }) => {
    if (!args?.stats?.length) return null;

    const data = parseSerializableStatsDisplay({
      ...args,
      id: (args as any)?.id ?? `stats-${toolCallId}`,
    });

    return (
      <StatsDisplayErrorBoundary>
        <StatsDisplay {...data} />
      </StatsDisplayErrorBoundary>
    );
  },
});
```

## Props

<TypeTable
  type={{
    id: {
      description: "Unique identifier for this component instance",
      type: "string",
      required: true,
    },
    title: {
      description: "Optional card title",
      type: "string",
    },
    description: {
      description: "Optional card description",
      type: "string",
    },
    stats: {
      description: "Array of stat items to display",
      type: "StatItem[]",
      required: true,
    },
    className: {
      description: "Additional CSS classes",
      type: "string",
    },
    isLoading: {
      description: "Show skeleton loading state",
      type: "boolean",
      default: "false",
    },
    locale: {
      description: "Locale for number formatting",
      type: "string",
    },
  }}
/>

## StatItem Schema

<TypeTable
  type={{
    key: {
      description: "Unique key for the stat",
      type: "string",
      required: true,
    },
    label: {
      description: "Label displayed above the value",
      type: "string",
      required: true,
    },
    value: {
      description: "The stat value",
      type: "number | string",
      required: true,
    },
    format: {
      description: "Value formatting config",
      type: "StatFormat",
    },
    diff: {
      description: "Change indicator",
      type: "StatDiff",
    },
    sparkline: {
      description: "Mini trend visualization",
      type: "StatSparkline",
    },
  }}
/>

## StatFormat Variants

<TypeTable
  type={{
    text: {
      description: "Display value as-is",
      type: "{ kind: 'text' }",
    },
    number: {
      description: "Format as number with optional decimals and compact notation",
      type: "{ kind: 'number', decimals?: number, compact?: boolean }",
    },
    currency: {
      description: "Format as currency",
      type: "{ kind: 'currency', currency: string, decimals?: number }",
    },
    percent: {
      description: "Format as percentage",
      type: "{ kind: 'percent', decimals?: number, basis?: 'fraction' | 'unit' }",
    },
  }}
/>

## StatDiff Schema

<TypeTable
  type={{
    value: {
      description: "Change percentage value",
      type: "number",
      required: true,
    },
    decimals: {
      description: "Decimal places for diff display",
      type: "number",
      default: "2",
    },
    upIsPositive: {
      description: "Whether positive change is good (green) or bad (red)",
      type: "boolean",
      default: "true",
    },
    label: {
      description: "Context label for the change (e.g., 'vs Q3')",
      type: "string",
    },
  }}
/>

## StatSparkline Schema

<TypeTable
  type={{
    data: {
      description: "Array of numeric values (minimum 2)",
      type: "number[]",
      required: true,
    },
    color: {
      description: "Custom stroke color",
      type: "string",
    },
  }}
/>

## Accessibility

- Uses semantic `<article>` with `aria-busy` for loading state
- All values are rendered as text, accessible to screen readers
- Sparklines are decorative SVG with appropriate hiding from assistive tech
