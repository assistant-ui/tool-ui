import { DocsHeader } from "../_components/docs-header";

<DocsHeader
  title="Terminal"
  description="Show command-line output and logs."
  mdxPath="app/docs/terminal/content.mdx"
/>

<TerminalPresetExample preset="success" />

## Key Features

<FeatureGrid>
  <Feature icon="Paintbrush" title="ANSI color support">
    Renders colored terminal output exactly as it appears in your shell
  </Feature>
  <Feature icon="CircleCheck" title="Exit code display">
    Clear visual indicators for success and failure states
  </Feature>
  <Feature icon="Timer" title="Duration tracking">
    Shows how long the command took to execute
  </Feature>
  <Feature icon="AlertCircle" title="Stdout/Stderr separation">
    Errors are visually distinct from standard output
  </Feature>
</FeatureGrid>

## Source and Install

Copy [`components/tool-ui/terminal`](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/terminal) and the [`shared`](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared) directory into your project. The `shared` folder contains utilities used by all Tool UI components. The `tool-ui` directory should sit alongside your shadcn `ui` directory.

### Prerequisites

This component requires the following [shadcn/ui](https://ui.shadcn.com) components:

```bash
pnpm dlx shadcn@latest add button
```

It also uses [Radix Collapsible](https://www.radix-ui.com/primitives/docs/components/collapsible) directly:

```bash
pnpm add @radix-ui/react-collapsible
```

### Directory Structure

<Files>
  <Folder name="components" defaultOpen>
    <Folder name="ui">
      <File name="badge.tsx" />
      <File name="button.tsx" />
      <File name="..." />
    </Folder>
    <Folder name="tool-ui" defaultOpen>
      <Folder name="shared" defaultOpen>
        <File name="action-buttons.tsx" />
        <File name="schema.ts" />
        <File name="index.ts" />
        <File name="..." />
      </Folder>
      <Folder name="terminal" defaultOpen>
        <File name="terminal.tsx" />
        <File name="schema.ts" />
        <File name="index.tsx" />
        <File name="progress.tsx" />
        <File name="_adapter.tsx" />
      </Folder>
    </Folder>
  </Folder>
</Files>

### Download

- [**Shared Dependencies (GitHub)**](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared) ([ZIP](https://download-directory.github.io/?url=https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared))
- [**Terminal (GitHub)**](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/terminal) ([ZIP](https://download-directory.github.io/?url=https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/terminal))

Install dependencies ([ansi-to-react](https://www.npmjs.com/package/ansi-to-react) for ANSI color parsing):

```bash
pnpm add ansi-to-react
```

## Usage

```tsx
import { Terminal } from "@/components/tool-ui/terminal";

export function MyComponent() {
  return (
    <Terminal
      id="my-terminal-example"
      command="ls -la"
      stdout={`total 16
drwxr-xr-x  3 user user 4096 Dec  3 10:23 .
drwxr-xr-x 12 user user 4096 Dec  3 10:20 ..
-rw-r--r--  1 user user  220 Dec  3 10:23 package.json`}
      exitCode={0}
      durationMs={45}
      cwd="~/project"
    />
  );
}
```

### With assistant-ui (tool output)

Define a tool that returns a terminal result payload, then render the component with runtime validation.

```tsx
// Backend tool
import { tool, jsonSchema } from "ai";

const showTerminal = tool({
  description: "Show a command result",
  inputSchema: jsonSchema<{}>({
    type: "object",
    properties: {},
    additionalProperties: false,
  }),
  async execute() {
    return {
      id: "terminal-1",
      command: "pnpm test",
      cwd: "~/project",
      exitCode: 0,
      durationMs: 1288,
      stdout: "\u001b[32m✓\u001b[0m 42 tests passed",
    };
  },
});

// Frontend with assistant-ui
import { makeAssistantToolUI } from "@assistant-ui/react";
import {
  Terminal,
  TerminalErrorBoundary,
  parseSerializableTerminal,
} from "@/components/tool-ui/terminal";

function ParsedTerminal({ result }: { result: unknown }) {
  const props = parseSerializableTerminal(result);
  return <Terminal {...props} />;
}

export const ShowTerminalUI = makeAssistantToolUI({
  toolName: "showTerminal",
  render: ({ result }) => {
    // Tool outputs stream in; `result` will be `undefined` until the tool resolves.
    if (result === undefined) {
      return <Terminal id="loading" command="…" exitCode={0} isLoading />;
    }

    return (
      <TerminalErrorBoundary>
        <ParsedTerminal result={result} />
      </TerminalErrorBoundary>
    );
  },
});
```

## Props

### Core Props

<TypeTable
  type={{
    command: {
      description: "The command that was executed",
      type: "string",
      required: true,
    },
    stdout: {
      description: "Standard output content",
      type: "string",
    },
    stderr: {
      description: "Standard error content",
      type: "string",
    },
    exitCode: {
      description: "Process exit code (0 = success)",
      type: "number",
      required: true,
    },
  }}
/>

### Metadata

<TypeTable
  type={{
    durationMs: {
      description: "Command execution time in milliseconds",
      type: "number",
    },
    cwd: {
      description: "Working directory where command ran",
      type: "string",
    },
    truncated: {
      description: "Indicates output was truncated",
      type: "boolean",
    },
  }}
/>

### Display Options

<TypeTable
  type={{
    maxCollapsedLines: {
      description: "Auto-collapse if output exceeds this many lines",
      type: "number",
    },
  }}
/>

### Standard Props

<TypeTable
  type={{
    id: {
      description: "Unique identifier for this component",
      type: "string",
      required: true,
    },
    responseActions: {
      description: "Response action buttons",
      type: "Action[]",
    },
    className: {
      description: "Additional CSS classes",
      type: "string",
    },
    isLoading: {
      description: "Show loading skeleton state",
      type: "boolean",
    },
  }}
/>

## ANSI Color Support

Terminal automatically renders ANSI escape codes for colored output:

```tsx
import { Terminal } from "@/components/tool-ui/terminal";

const coloredOutput = "\x1b[32m✔\x1b[0m Success\n\x1b[31m✗\x1b[0m Error";

<Terminal
  id="my-terminal"
  command="npm test"
  stdout={coloredOutput}
  exitCode={0}
/>;
```

Common ANSI codes:

- `\x1b[32m` - Green text
- `\x1b[31m` - Red text
- `\x1b[33m` - Yellow text
- `\x1b[36m` - Cyan text
- `\x1b[1m` - Bold text
- `\x1b[0m` - Reset formatting

## Exit Code Meanings

- `0` - Success (green)
- `1` - General error (red)
- `2` - Misuse of shell builtins (red)
- `126` - Command not executable (red)
- `127` - Command not found (red)
- `130` - Interrupted with Ctrl+C (red)
- Any non-zero - Error (red)

## Accessibility

- ANSI colors maintain WCAG contrast ratios against both light and dark backgrounds
- Screen readers announce the command, exit status, and output content
- Collapsible sections are keyboard-accessible with proper ARIA attributes
