import { DocsHeader } from "../_components/docs-header";
import { DataTable } from "@/components/tool-ui/data-table";
import { MediaCard } from "@/components/tool-ui/media-card";
import { XPost } from "@/components/tool-ui/x-post";

<DocsHeader
  title="Response Actions"
  mdxPath="app/docs/response-actions/content.mdx"
/>

Response Actions are human-in-the-loop decision points—lightweight CTAs that let users respond to AI-generated content before it's finalized or acted upon.

## DataTable with Response Actions

<Tabs items={["Preview", "Code"]}>
  <Tab>
    <div className="not-prose">
      <DataTable
        rowIdKey="id"
        columns={[
          { key: "issue", label: "Issue", priority: "primary", truncate: true },
          {
            key: "priority",
            label: "Urgency",
            format: {
              kind: "status",
              statusMap: {
                high: { tone: "danger", label: "High" },
                medium: { tone: "warning", label: "Medium" },
                low: { tone: "neutral", label: "Low" },
              },
            },
          },
          {
            key: "createdAt",
            label: "Created",
            format: { kind: "date", dateFormat: "relative" },
          },
        ]}
        data={[
          { id: "1", issue: "Payment failing on checkout", priority: "high", createdAt: "2025-11-11T09:24:00Z" },
          { id: "2", issue: "Billing UI alignment bug", priority: "medium", createdAt: "2025-11-10T17:03:00Z" },
          { id: "3", issue: "Export CSV missing headers", priority: "low", createdAt: "2025-11-08T08:00:00Z" },
        ]}
        responseActions={{
          items: [
            { id: "export", label: "Export CSV", variant: "secondary" },
            { id: "sync", label: "Sync to Jira", variant: "default", confirmLabel: "Confirm Sync" },
          ],
          align: "right",
        }}
      />
    </div>
  </Tab>
  <Tab>
    ```tsx
    import { DataTable } from "@/components/tool-ui/data-table";

    <DataTable
      rowIdKey="id"
      columns={[
        { key: "issue", label: "Issue", priority: "primary", truncate: true },
        {
          key: "priority",
          label: "Urgency",
          format: {
            kind: "status",
            statusMap: {
              high: { tone: "danger", label: "High" },
              medium: { tone: "warning", label: "Medium" },
              low: { tone: "neutral", label: "Low" },
            },
          },
        },
        { key: "createdAt", label: "Created", format: { kind: "date", dateFormat: "relative" } },
      ]}
      data={[
        { id: "1", issue: "Payment failing on checkout", priority: "high", createdAt: "2025-11-11T09:24:00Z" },
        { id: "2", issue: "Billing UI alignment bug", priority: "medium", createdAt: "2025-11-10T17:03:00Z" },
        { id: "3", issue: "Export CSV missing headers", priority: "low", createdAt: "2025-11-08T08:00:00Z" },
      ]}
      responseActions={{
        items: [
          { id: "export", label: "Export CSV", variant: "secondary" },
          { id: "sync", label: "Sync to Jira", variant: "default", confirmLabel: "Confirm Sync" },
        ],
        align: "right",
      }}
      onResponseAction={(id) => console.log("Action:", id)}
    />
    ```
  </Tab>
</Tabs>

## MediaCard with Response Actions

<Tabs items={["Preview", "Code"]}>
  <Tab>
    <div className="not-prose">
      <MediaCard
        id="response-actions-media-card"
        assetId="rsc-guide"
        kind="link"
        href="https://react.dev/reference/rsc/server-components"
        title="React Server Components"
        description="Learn how to use Server Components to build fast, dynamic applications with React."
        thumb="https://images.unsplash.com/photo-1633356122544-f134324a6cee?auto=format&fit=crop&q=80&w=1200"
        ratio="16:9"
        domain="react.dev"
        maxWidth="420px"
        responseActions={[
          { id: "open", label: "Open", variant: "default" },
          { id: "save", label: "Save for later", variant: "secondary" },
        ]}
      />
    </div>
  </Tab>
  <Tab>
    ```tsx
    import { MediaCard } from "@/components/tool-ui/media-card";

    <MediaCard
      id="response-actions-media-card"
      assetId="rsc-guide"
      kind="link"
      href="https://react.dev/reference/rsc/server-components"
      title="React Server Components"
      description="Learn how to use Server Components to build fast, dynamic applications."
      thumb="https://images.unsplash.com/photo-1633356122544-f134324a6cee"
      ratio="16:9"
      domain="react.dev"
      maxWidth="420px"
      responseActions={[
        { id: "open", label: "Open", variant: "default" },
        { id: "save", label: "Save for later", variant: "secondary" },
      ]}
      onResponseAction={(id) => console.log("Action:", id)}
    />
    ```
  </Tab>
</Tabs>

## XPost with Response Actions

<Tabs items={["Preview", "Code"]}>
  <Tab>
    <div className="not-prose">
      <XPost
        post={{
          id: "response-actions-x-post",
          author: {
            name: "Tool UI",
            handle: "tool_ui",
            avatarUrl: "https://api.dicebear.com/7.x/shapes/svg?seed=toolui",
            verified: true,
          },
          text: "Just shipped a major update to Tool UI!\n\nResponse Actions are now live—human-in-the-loop decision points that attach to any component.\n\nCheck it out: https://tool-ui.com/docs/response-actions",
        }}
        responseActions={[
          { id: "edit", label: "Edit draft", variant: "secondary" },
          { id: "schedule", label: "Schedule", variant: "outline" },
          { id: "post", label: "Post now", variant: "default", confirmLabel: "Confirm" },
        ]}
      />
    </div>
  </Tab>
  <Tab>
    ```tsx
    import { XPost } from "@/components/tool-ui/x-post";

    <XPost
      post={{
        id: "response-actions-x-post",
        author: {
          name: "Tool UI",
          handle: "tool_ui",
          avatarUrl: "https://api.dicebear.com/7.x/shapes/svg?seed=toolui",
          verified: true,
        },
        text: "Just shipped a major update to Tool UI!\n\nResponse Actions are now live.",
      }}
      responseActions={[
        { id: "edit", label: "Edit draft", variant: "secondary" },
        { id: "schedule", label: "Schedule", variant: "outline" },
        { id: "post", label: "Post now", variant: "default", confirmLabel: "Confirm" },
      ]}
      onResponseAction={(id) => console.log("Action:", id)}
    />
    ```
  </Tab>
</Tabs>

## Action Shape

`responseActions` accepts either an array of actions or an object with layout config:

```ts
// Array form
responseActions={[
  { id: "approve", label: "Approve", variant: "default" },
  { id: "reject", label: "Reject", variant: "destructive", confirmLabel: "Confirm" },
]}

// Config form with alignment
responseActions={{
  items: [
    { id: "export", label: "Export", variant: "secondary" },
    { id: "sync", label: "Sync", variant: "default", confirmLabel: "Confirm" },
  ],
  align: "right",      // default "right"
  confirmTimeout: 3000 // default 3000ms
}}
```

### Action Fields

<TypeTable
  type={{
    id: { description: "Unique identifier", type: "string", required: true },
    label: { description: "Button text", type: "string", required: true },
    variant: { description: "Button style", type: "'default' | 'secondary' | 'ghost' | 'destructive' | 'outline'", default: "'secondary'" },
    confirmLabel: { description: "Enables two-step confirm (label shown on second click)", type: "string" },
    disabled: { description: "Disable the button", type: "boolean" },
    loading: { description: "Show loading spinner", type: "boolean" },
    shortcut: { description: "Keyboard hint", type: "string" },
    icon: { description: "Icon element (runtime only)", type: "ReactNode" },
  }}
/>

## Handlers

<TypeTable
  type={{
    onResponseAction: { description: "Called after confirm/preflight completes", type: "(actionId: string) => void" },
    onBeforeResponseAction: { description: "Gate actions—return false to cancel", type: "(actionId: string) => boolean | Promise<boolean>" },
  }}
/>

## Serialization

Use `SerializableAction` when actions come from tool/LLM output. Runtime code can add React icons and handlers on top.

```tsx
// Tool output (serializable)
const toolOutput = {
  responseActions: [
    { id: "open", label: "Open", variant: "default" },
    { id: "save", label: "Save", variant: "secondary" },
  ],
};

// Runtime rendering (can add icons, handlers)
<MediaCard
  {...toolOutput}
  onResponseAction={(id) => {
    if (id === "open") window.open(url, "_blank");
    if (id === "save") saveToLibrary(url);
  }}
/>
```

## Design Guidance

- Default to 2–3 CTAs tied directly to the content above; avoid toolbar sprawl
- Use `confirmLabel` for destructive or high-impact actions
- Keep `confirmTimeout` short (default 3000ms) to avoid stale confirm states
- ActionButtons are responsive by default—they stack on narrow containers
- For richer controls, prefer dedicated components (OptionList, filters) and keep this strip focused on decisions
