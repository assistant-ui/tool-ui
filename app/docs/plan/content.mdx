import { DocsHeader } from "../_components/docs-header";

<DocsHeader
  title="Plan"
  description="A structured plan display component for presenting step-by-step tasks with progress tracking, status indicators, and expandable details. Perfect for AI assistants presenting implementation plans, task breakdowns, or guided workflows."
  mdxPath="app/docs/plan/content.mdx"
/>

<PlanPresetExample preset="comprehensive" />

## Key Features

<FeatureGrid>
  <Feature icon="BarChart3" title="Progress visualization">
    Progress bar and "X of Y complete" at a glance
  </Feature>
  <Feature icon="CircleCheck" title="Status indicators">
    Distinct icons for pending, in progress, completed, and cancelled
  </Feature>
  <Feature icon="Expand" title="Expandable details">
    Click any todo to reveal additional context
  </Feature>
  <Feature icon="PartyPopper" title="Completion celebration">
    Delightful feedback when all tasks are done
  </Feature>
</FeatureGrid>

## When to Use

- **Good for:** Implementation roadmaps, onboarding checklists, deployment steps, task breakdowns
- **Not for:** Real-time task management (use interactive todo apps), single actions

## Source and Install

Copy [`components/tool-ui/plan`](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/plan) and the [`shared`](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared) directory into your project. The `shared` folder contains utilities used by all Tool UI components. The `tool-ui` directory should sit alongside your shadcn `ui` directory.

### Prerequisites

This component requires the following [shadcn/ui](https://ui.shadcn.com) components:

```bash
pnpm dlx shadcn@latest add accordion button card collapsible
```

### Directory Structure

<Files>
  <Folder name="components" defaultOpen>
    <Folder name="ui">
      <File name="accordion.tsx" />
      <File name="button.tsx" />
      <File name="card.tsx" />
      <File name="collapsible.tsx" />
      <File name="..." />
    </Folder>
    <Folder name="tool-ui" defaultOpen>
      <Folder name="shared" defaultOpen>
        <File name="action-buttons.tsx" />
        <File name="schema.ts" />
        <File name="index.ts" />
        <File name="..." />
      </Folder>
      <Folder name="plan" defaultOpen>
        <File name="plan.tsx" />
        <File name="schema.ts" />
        <File name="index.tsx" />
        <File name="_adapter.tsx" />
      </Folder>
    </Folder>
  </Folder>
</Files>

### Download

- [**Shared Dependencies (GitHub)**](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared) ([ZIP](https://download-directory.github.io/?url=https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared))
- [**Plan (GitHub)**](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/plan) ([ZIP](https://download-directory.github.io/?url=https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/plan))

## Usage

```tsx
// Backend tool
import { tool, jsonSchema } from "ai";

const showPlan = tool({
  description: "Display an implementation plan to the user",
  inputSchema: jsonSchema<{ task: string }>({
    type: "object",
    properties: { task: { type: "string" } },
    required: ["task"],
    additionalProperties: false,
  }),
  async execute({ task }) {
    return {
      id: "plan-1",
      title: "Implementation Plan",
      description: `Steps to complete: ${task}`,
      todos: [
        { id: "1", label: "Analyze requirements", status: "completed" },
        { id: "2", label: "Implement solution", status: "in_progress" },
        { id: "3", label: "Write tests", status: "pending" },
      ],
    };
  },
});

// Frontend with assistant-ui
import { makeAssistantToolUI } from "@assistant-ui/react";
import { Plan, PlanErrorBoundary, parseSerializablePlan } from "@/components/tool-ui/plan";

export const ShowPlanUI = makeAssistantToolUI({
  toolName: "showPlan",
  render: ({ result }) => {
    // Tool outputs stream in; `result` will be `undefined` until the tool resolves.
    if (result === undefined) {
      return (
        <div className="w-full max-w-xl rounded-2xl border bg-card/60 px-5 py-4 text-sm text-muted-foreground shadow-xs">
          Loading planâ€¦
        </div>
      );
    }

    const plan = parseSerializablePlan(result);
    return (
      <PlanErrorBoundary>
        <Plan
          {...plan}
          responseActions={[
            { id: "approve", label: "Approve Plan" },
            { id: "revise", label: "Request Changes", variant: "secondary" },
          ]}
          onResponseAction={(id) => {
            if (id === "approve") console.log("Plan approved");
            // Handle other actions
          }}
        />
      </PlanErrorBoundary>
    );
  },
});
```

### With Expandable Details

```tsx
<Plan
  id="feature-plan"
  title="Feature Implementation"
  todos={[
    {
      id: "1",
      label: "Design API schema",
      status: "completed",
      description: "Created OpenAPI spec with all endpoints documented",
    },
    {
      id: "2",
      label: "Implement endpoints",
      status: "in_progress",
      description: "Working on authentication middleware",
    },
    { id: "3", label: "Write tests", status: "pending" },
  ]}
/>
```

## Props

<TypeTable
  type={{
    id: {
      description: "Unique identifier for this component",
      type: "string",
      required: true,
    },
    title: {
      description: "Plan title displayed as the header",
      type: "string",
      required: true,
    },
    description: {
      description: "Context description below the title",
      type: "string",
    },
    todos: {
      description: "Array of todo items (min 1)",
      type: "PlanTodo[]",
      required: true,
    },
    maxVisibleTodos: {
      description: "Items to show before collapsing",
      type: "number",
      default: "4",
    },
    showProgress: {
      description: "Show/hide progress bar and summary",
      type: "boolean",
      default: "true",
    },
    responseActions: {
      description: "Footer action buttons",
      type: "Action[] | ActionsConfig",
    },
    className: { description: "Additional CSS classes", type: "string" },
    onResponseAction: {
      description: "Callback when action button clicked",
      type: "(actionId: string) => void",
    },
    onBeforeResponseAction: {
      description: "Validation before action executes",
      type: "(actionId: string) => boolean",
    },
  }}
/>

## Todo Item Schema

<TypeTable
  type={{
    id: {
      description: "Unique todo identifier",
      type: "string",
      required: true,
    },
    label: { description: "Display text", type: "string", required: true },
    status: {
      description: "Current state",
      type: "'pending' | 'in_progress' | 'completed' | 'cancelled'",
      required: true,
    },
    description: { description: "Expandable detail text", type: "string" },
  }}
/>

## Examples

### Simple Plan (No Accordion)

<PlanPresetExample preset="simple" />

### Comprehensive Plan with Details

<PlanPresetExample preset="comprehensive" />

### Mixed Status States

<PlanPresetExample preset="mixed_states" />

### All Complete (Celebration State)

<PlanPresetExample preset="all_complete" />

## Status States

<TypeTable
  type={{
    pending: {
      description: "Circle outline icon, muted color",
      type: "Not started",
    },
    in_progress: {
      description: "Dashed circle (spinning) icon, shimmer text effect",
      type: "Active",
    },
    completed: {
      description: "Checkmark icon, emerald green with strikethrough",
      type: "Done",
    },
    cancelled: {
      description: "X circle icon, destructive color with strikethrough",
      type: "Skipped",
    },
  }}
/>

## Accessibility

- Spinning icon and shimmer animations respect `prefers-reduced-motion`
- Users who prefer reduced motion see static icons and text
