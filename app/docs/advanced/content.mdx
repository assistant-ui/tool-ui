import { CopyMarkdownButton } from "../_components/copy-markdown-button";

<div className="flex justify-between items-start">
  # Advanced
  <CopyMarkdownButton />
  </div>

Deep‑dive topics for stronger typing and larger integrations.

## Typed Tools in the UI

With `InferUITools` in AI SDK 5, you can Infer tool input/output types from your tool set to get fully typed `message.parts` in the UI.

- [See InferUITools docs]((https://ai-sdk.dev/docs/reference/ai-sdk-ui/infer-ui-tools))

<Steps>
<Step>

### Share your tools

```ts title="lib/tools.ts"
import { tool } from 'ai';
import { z } from 'zod';
import { serializableMediaCardSchema } from '@/components/media-card/schema';

export const tools = {
  previewLink: tool({
    description: 'Return a simple link preview',
    inputSchema: z.object({ url: z.string().url() }),
    outputSchema: serializableMediaCardSchema,
        async execute({ url }) {
          return {
            id: 'link-1',
            kind: 'link',
            href: url,
            title: 'React — Server Components',
            thumb: 'https://images.unsplash.com/photo-1633356122544-f134324a6cee?auto=format&fit=crop&q=80&w=1200',
          };
        },
  }),
} as const;

// Export a type only; the client should import types, not server code.
export type Tools = typeof tools;
```

</Step>

<Step>

### Use on the server

```ts title="app/api/chat/route.ts"
import { tools } from '@/lib/tools';

const result = streamText({
  model: openai('gpt-4o'),
  messages: convertToModelMessages(messages),
  tools,
});
```

</Step>

<Step>

### Use in the UI

```tsx title="app/page.tsx"
import { InferUITools } from 'ai';
import type { Tools } from '@/lib/tools';

type MyUITools = InferUITools<Tools>;

export default function Chat() {
  const { messages } = useChat<MyUITools>({ api: '/api/chat' });

  return (
    <div>
      {messages.map((m) => (
        <div key={m.id}>
          {m.parts.map((part, i) => {
            // Fully typed: 'tool-previewLink' with correct output shape
            if (part.type === 'tool-previewLink' && part.state === 'output-available') {
              return <MediaCard key={i} {...part.output} />;
            }
            return null;
          })}
        </div>
      ))}
    </div>
  );
}
```

</Step>

</Steps>

## Tips
- Keep runtime boundaries clean: import only types from `ai/tools.ts` on the client.
- For single tools, `InferUITool` works the same way.
- Use `outputSchema` for end‑to‑end validation.
