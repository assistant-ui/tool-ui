import { DocsHeader } from "../_components/docs-header";

<DocsHeader title="Chart" mdxPath="app/docs/chart/content.mdx" />

An interactive charting component for data visualization in chat. Supports bar and line charts with tooltips, legends, and multiple data series.

<ChartPresetExample preset="revenue" />

## Key Features

<FeatureGrid>
  <Feature icon="BarChart3" title="Bar and line charts">
    Choose the right visualization for your data
  </Feature>
  <Feature icon="Layers" title="Multiple series">
    Compare datasets side-by-side with automatic coloring
  </Feature>
  <Feature icon="MousePointerClick" title="Interactive tooltips">
    Click handlers and hover tooltips for deeper exploration
  </Feature>
  <Feature icon="Settings2" title="Configurable display">
    Toggle legends, grid lines, and custom color palettes
  </Feature>
</FeatureGrid>

## When to Use

- **Good for:** Trends, comparisons, distributions, time-series data
- **Not for:** Single values (use text), detailed tabular data (use Data Table), complex dashboards

## Variants

### Line Charts

Switch to line charts for time-series or continuous data.

<ChartPresetExample preset="performance" />

### Minimal Configuration

Charts work with just `data`, `xKey`, and `series`. Title, description, legend, and grid are optional.

<ChartPresetExample preset="minimal" />

## Source and Install

Copy `components/tool-ui/chart` and the `shared` directory into your project. The `shared` folder contains utilities used by all Tool UI components. The `tool-ui` directory should sit alongside your shadcn `ui` directory.

### Prerequisites

This component requires the following [shadcn/ui](https://ui.shadcn.com) components:

```bash
pnpm dlx shadcn@latest add card chart
```

### Directory Structure

<Files>
  <Folder name="components" defaultOpen>
    <Folder name="ui">
      <File name="chart.tsx" />
      <File name="card.tsx" />
      <File name="..." />
    </Folder>
    <Folder name="tool-ui" defaultOpen>
      <Folder name="shared" defaultOpen>
        <File name="action-buttons.tsx" />
        <File name="schema.ts" />
        <File name="index.ts" />
        <File name="..." />
      </Folder>
      <Folder name="chart" defaultOpen>
        <File name="chart.tsx" />
        <File name="schema.ts" />
        <File name="index.tsx" />
        <File name="..." />
      </Folder>
    </Folder>
  </Folder>
</Files>

### Download

- [**Shared Dependencies (GitHub)**](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared) ([ZIP](https://download-directory.github.io/?url=https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/shared))
- [**Chart (GitHub)**](https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/chart) ([ZIP](https://download-directory.github.io/?url=https://github.com/assistant-ui/tool-ui/tree/main/components/tool-ui/chart))

## Usage

```tsx
import { Chart } from "@/components/tool-ui/chart";

<Chart
  id="monthly-revenue"
  type="bar"
  title="Monthly Revenue"
  description="2024 YTD"
  data={[
    { month: "Jan", revenue: 4000, expenses: 2400 },
    { month: "Feb", revenue: 3000, expenses: 1398 },
    // ...
  ]}
  xKey="month"
  series={[
    { key: "revenue", label: "Revenue" },
    { key: "expenses", label: "Expenses" },
  ]}
  showLegend
  showGrid
/>;
```

### With assistant-ui (tool output)

Define a tool that returns chart data, then render the component with runtime validation.

```tsx
// Backend tool
import { tool, jsonSchema } from "ai";

const showChart = tool({
  description: "Display data as a chart",
  inputSchema: jsonSchema<{ metric: string }>({
    type: "object",
    properties: { metric: { type: "string" } },
    required: ["metric"],
    additionalProperties: false,
  }),
  async execute({ metric }) {
    const data = await fetchMetricData(metric);
    return {
      id: `chart-${metric}`,
      type: "line",
      title: `${metric} Over Time`,
      data,
      xKey: "date",
      series: [{ key: "value", label: metric }],
      showGrid: true,
    };
  },
});

// Frontend with assistant-ui
import { makeAssistantToolUI } from "@assistant-ui/react";
import {
  Chart,
  ChartErrorBoundary,
  parseSerializableChart,
} from "@/components/tool-ui/chart";

export const ShowChartUI = makeAssistantToolUI({
  toolName: "showChart",
  render: ({ result }) => {
    if (result === undefined) {
      return (
        <div className="w-full max-w-xl rounded-2xl border bg-card/60 px-5 py-4 text-sm text-muted-foreground shadow-xs">
          Loading chartâ€¦
        </div>
      );
    }

    const chart = parseSerializableChart(result);
    return (
      <ChartErrorBoundary>
        <Chart {...chart} />
      </ChartErrorBoundary>
    );
  },
});
```

### With Custom Colors

```tsx
<Chart
  id="custom-colors"
  type="bar"
  data={data}
  xKey="month"
  series={[
    { key: "revenue", label: "Revenue" },
    { key: "expenses", label: "Expenses" },
  ]}
  colors={["#22c55e", "#ef4444"]}
/>
```

### With Click Handler

```tsx
<Chart
  id="clickable"
  type="line"
  data={data}
  xKey="time"
  series={[{ key: "value", label: "Value" }]}
  onDataPointClick={(point) => {
    console.log("Clicked:", point.xValue, point.yValue);
  }}
/>
```

## Props

<TypeTable
  type={{
    id: {
      description: "Unique identifier for this chart instance",
      type: "string",
      required: true,
    },
    type: {
      description: "Chart type",
      type: "'bar' | 'line'",
      required: true,
    },
    data: {
      description: "Array of data records",
      type: "Record<string, unknown>[]",
      required: true,
    },
    xKey: {
      description: "Key for x-axis values",
      type: "string",
      required: true,
    },
    series: {
      description: "Data series to plot",
      type: "ChartSeries[]",
      required: true,
    },
    title: {
      description: "Chart title (renders in Card header)",
      type: "string",
    },
    description: {
      description: "Chart description (renders below title)",
      type: "string",
    },
    colors: {
      description: "Custom color palette for series",
      type: "string[]",
    },
    showLegend: {
      description: "Show legend below chart",
      type: "boolean",
      default: "false",
    },
    showGrid: {
      description: "Show background grid lines",
      type: "boolean",
      default: "true",
    },
    onDataPointClick: {
      description: "Click handler for data points",
      type: "(point: ChartDataPoint) => void",
    },
  }}
/>

## Series Schema

<TypeTable
  type={{
    key: {
      description: "Data key to plot",
      type: "string",
      required: true,
    },
    label: {
      description: "Display label for legend/tooltip",
      type: "string",
      required: true,
    },
    color: {
      description: "Override color for this series",
      type: "string",
    },
  }}
/>

## ChartDataPoint (click handler payload)

<TypeTable
  type={{
    seriesKey: {
      description: "Key of the clicked series",
      type: "string",
    },
    seriesLabel: {
      description: "Label of the clicked series",
      type: "string",
    },
    xValue: {
      description: "X-axis value at click point",
      type: "unknown",
    },
    yValue: {
      description: "Y-axis value at click point",
      type: "unknown",
    },
    index: {
      description: "Index in data array",
      type: "number",
    },
    payload: {
      description: "Full data record for clicked point",
      type: "Record<string, unknown>",
    },
  }}
/>
